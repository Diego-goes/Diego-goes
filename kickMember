// Import the discord.js module
const { Client, Intents } = require('discord.js');

// Create an instance of a Discord client
const client = new Client({ intents: [Intents.FLAGS.GUILDS, Intents.FLAGS.GUILD_MESSAGES] });
const config = require("./config.json");
/**
 * The ready event is vital, it means that only _after_ this will your bot start reacting to information
 * received from Discord
 */
client.on('ready', () => {
    console.log('I am ready!');
});


client.on('message', message => {
    if (!message.guild) return;

    
    if (message.content.startsWith(`${config.prefix}kick`)) {
        if (message.member.hasPermission(['KICK_MEMBERS'])) {
            const user = message.mentions.users.first();
            if (user) {
                console.log(`4 - if do user | User = ${user}`);
                const member = message.guild.members.resolve(user);
                if(!member){
                  message.channel.send(`O membro não está no server!`);
              }
                if (member) {
                    member
                        .kick(`Desculpe, decidimos expulsar você!`)
                        .then(() => { message.channel.send(`Successfully kicked ${user.tag}`) })
                        .catch(err => {
                            message.channel.send(`Eu não tenho permissão para kickar o membro.`)
                            console.log(err)
                        });
                } 
            } else {
              message.channel.send(`Você não mencionou nenhum usuário.`);
          }
        } else {
            message.channel.send('Você não pode expulsar!')
        }
    }

});
client.login(config.token)
